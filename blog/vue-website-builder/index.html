<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><style type="text/css">*{box-sizing:border-box}html{font-size:16px}body{font-family:sans-serif;font-size:1rem;line-height:1.5rem}nav{margin:1rem 5%}body,nav ul{margin:0;padding:0}nav li{display:inline;margin:0 1rem}nav li:first-child{margin-left:0}@media screen and (min-width:670px){nav{margin-left:1rem}}main{width:90%;max-width:720px;margin:3rem auto}em,h1,h1 span,h2,h2 span,h3,h3 span,h4,h4 span,li code,p code,strong{background:linear-gradient(90deg,#9e009e 0%,#ff007f 49%,#d98400 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}h1,h2,h3,h4{font-family:sans-serif}h1{margin:2rem 0 1.5rem;font-size:2.5rem;line-height:3rem;font-weight:300;display:table}h2{margin:2rem 0 1rem;font-size:2rem;line-height:2.5rem;font-weight:400}h3,h4{font-weight:500}h3{font-size:1.5rem;line-height:2rem;margin:1rem 0 .5rem}blockquote,h4,iframe,ol,p,ul{font-size:1rem;line-height:1.5rem}h4{margin:.5rem 0}blockquote,hgroup,iframe,ol,p,ul{margin:1rem 0}hgroup h1,hgroup h2,hgroup h3,hgroup h4{margin:0}blockquote code,iframe code,ol code,p code,sup.footnote-ref,ul code{line-height:.5rem}ol,ul{padding:0 0 0 1.5rem}footer img{height:24px}section{padding:1rem 0}hr{margin:2rem 0}sup.footnote-ref{font-size:1rem}blockquote{border-left:6px rgba(1,1,1,.05) solid;background-color:rgba(1,1,1,.05);padding:.5rem .5rem .5rem 1rem}dt{margin-top:1rem}dd{margin-bottom:1rem;margin-left:1rem}</style><title>Adam Buczek | Vue website builder</title><meta name="description" content=""></head><body><nav><ul><li><a href="/">Adam Buczek</a></li>|<li><a href="/blog">Blog</a></li></ul></nav><main role="main"><span class="journal-entry--date">17 Nov 2020</span><img src="/assets/builder.png" alt="Vue website builder" title="Vue website builder"><h1>Vue website builder</h1><p>Building a UI that allows creating and/or editing web pages is a task I took up at least once at every job I had. It always adds complexity — not only to the web page itself but also by requiring additional back end for HTML rendering. Today this complexity is already there in a form of modern UI libraries and build tools.</p><p>We will create an application that allows users to build simple web pages from preexisting parts.</p><blockquote><p>For clarity the web pages that are the end product of the whole process will be referred to as <em>Pages</em> and their elements as <em>Modules</em>.</p></blockquote><h2>The goals</h2><ul><li><p>End users should be presented with a drag-and-drop interface.</p></li><li><p>The UI should allow users to edit the content in imported <em>Modules</em> — edit text (with and without formatting), add and change images etc.</p></li><li><p>Users can rearrange <em>Modules</em> in edit view.</p></li><li><p><em>Pages</em> should be built from a library (or libraries) of <em>Modules</em> created by another team (or teams) with new created on request.</p></li><li><p>CSS should not leak to or out of the main app.</p></li><li><p>New <em>Modules</em> can be created in a matter of hours — making them available in the UI should not require whole app to be redeployed.</p></li><li><p>Created <em>Pages</em> must be exportable into standalone HTML pages with an option of Java Script free version.</p></li></ul><h2>Non-goals</h2><ul><li><p>Users can't create modules themselves. Only compose <em>Pages</em> from existing modules.</p></li><li><p>Not everything is editable. Only elements explicitly marked as editable can be accessed and changed by a user.</p></li><li><p>Some aspects can never be changed eg. fonts and most of the typography is defined upfront for each module.</p></li></ul><h2>The plan</h2><p>System composed of 3 parts:</p><dl><dt><strong>Component Library(-ies)</strong></dt><dd>Set of Vue components that accept custom data via props. Built in a way that allows loading them via HTTP.</dd><dt><strong>User Interface</strong></dt><dd>A Vue based web app. A view where components can be put together into a <em>Page</em> and filled with data. Think <a href="https://wordpress.org/gutenberg/">Guttenberg</a>.</dd><dt><strong>Exporter</strong></dt><dd>A Node server. This will export <em>Pages</em> as standalone web pages.</dd></dl><h3>Basic assumptions<a name="basic-assumptions"></a></h3><p>After in depth analysis in search of possible problem areas I decided on a set of prerequisites:</p><dl><dt><strong>Modules in Component Libraries must adhere to a standard</strong></dt><dd>Editable props must be identifiable and accessible for UI to inject data.</dd><dt><strong>UI and Exporter need a shared protocol</strong></dt><dd>It has to fully express what the <em>Page</em> is. Data validation on both ends will greatly reduce hard to find bugs.</dd><dt><strong>UI and Exporter need to have access to the identical component libraries</strong></dt><dd>UI will fetch modules in <a href="https://github.com/umdjs/umd">UMD</a> form via HTTP. Exporter can do the same or install whole library in requested version.</dd><dt><strong>CLs, UI and Exporter need to share dependencies</strong></dt><dd>We don't want to embed external libraries into CL modules.<br><em>Firstly</em> this would ship external libraries (with their dependencies), eg. a third party gallery component, inside imported component and take away the chance for optimizing the package size in exporter.<br><em>Secondly</em>, in case the module creation is outsourced we need to control what libraries are being used.</dd></dl><h2>Summary</h2><p>In the next 3 posts I will describe specific elements of this system, both in depth and in insolation. I am going to explain how assumptions above were expressed in the code. I will finish the whole series with another overview — how the design of the whole system influenced each of its parts, and what was done to avoid coupling the code too tightly.</p></main><footer><ul><li><a href="https://www.linkedin.com/in/adamsbuczek/"><img src="/assets/linkedin.svg" alt="LinkedIn"></a></li><li><a href="https://github.com/adambuczek"><img src="/assets/github.svg" alt="Github"></a></li><li><a href="https://codepen.io/adambuczek"><img src="/assets/codepen.svg" alt="Codepen"></a></li></ul></footer><link href="/styles/global.css" rel="stylesheet" type="text/css"><link href="/styles/print.css" media="print" rel="stylesheet" type="text/css"></body></html>